<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
	xmlns:ui="http://java.sun.com/jsf/facelets"
	xmlns:h="http://java.sun.com/jsf/html"
	xmlns:f="http://java.sun.com/jsf/core"
	xmlns:s="http://jboss.com/products/seam/taglib"
	xmlns:rich="http://richfaces.org/rich">
	<body>
		<f:view>
			<ui:composition template="/layout/template.xhtml">

				<ui:define name="body">

					<rich:panel id="partyRelationshipListPanel">
						<f:facet name="header">Party Relationship List</f:facet>
						<div class="actionButtons">
							<s:button id="addRelationshipButton" view="/party/relationship/form.xhtml"
								value="Add Relationship" propagation="begin">
								<f:param name="partyRelationshipId" value="" />
							</s:button>
						</div>
						<div class="results">

							<rich:dataTable id="partyRelationshipList"
								var="partyRelationship"
								value="#{partyRelationshipListForUserLogin.resultList}">

								<rich:column id="commentColumn">
									<f:facet name="header">Comment</f:facet>
									<s:link id="relationshipEditLink" action="/party/relationship/form.xhtml"
										value="#{partyRelationship.comment}">
										<s:conversationPropagation type="begin"></s:conversationPropagation>
										<f:param name="partyRelationshipId"
											value="#{partyRelationship.id}" />
									</s:link>
								</rich:column>

								<rich:column id="fromDateColumn">
									<f:facet name="header">From Date</f:facet>
									<h:outputText value="#{partyRelationship.from}">
										<f:convertDateTime pattern="MM/dd/yyyy" />
									</h:outputText>
								</rich:column>

								<rich:column id="thruDateColumn">
									<f:facet name="header">Thru Date</f:facet>
									<h:outputText value="#{partyRelationship.thru}">
										<f:convertDateTime pattern="MM/dd/yyyy" />
									</h:outputText>
								</rich:column>

								<rich:column id="fromPartyColumn">
									<f:facet name="header">From Party</f:facet>
									<ui:include src="/party/nameView.xhtml">
										<ui:param name="showPartyName" value="true" />
										<ui:param name="party"
											value="#{partyRelationship.fromParty.roleFor}" />
									</ui:include>
									<h:outputText
										value=" in role #{partyRelationship.fromParty.describedBy.description}" />
								</rich:column>

								<rich:column id="toPartyColumn">
									<f:facet name="header">To Party</f:facet>
									<ui:include src="/party/nameView.xhtml">
										<ui:param name="showPartyName" value="true" />
										<ui:param name="party"
											value="#{partyRelationship.toParty.roleFor}" />
									</ui:include>
									<h:outputText
										value=" in role #{partyRelationship.toParty.describedBy.description}" />
								</rich:column>

								<rich:column id="descriptionColumn">
									<f:facet name="header">Description</f:facet>
									<h:outputText
										value="#{partyRelationship.describedBy.description}" />
								</rich:column>

								<rich:column id="priorityColumn">
									<f:facet name="header">Priority</f:facet>
									<h:outputText
										value="#{partyRelationship.prioritizedBy.description}" />
								</rich:column>

								<rich:column id="definedByColumn">
									<f:facet name="header">Status</f:facet>
									<h:outputText
										value="#{partyRelationship.definedBy.description}" />
								</rich:column>

							</rich:dataTable>
							<h:outputText value="No party relationships"
								rendered="#{empty partyRelationshipListForUserLogin.resultList}" />
						</div>
					</rich:panel>

				</ui:define>
			</ui:composition>
		</f:view>
	</body>
</html>