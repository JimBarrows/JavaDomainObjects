<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
	xmlns:ui="http://java.sun.com/jsf/facelets"
	xmlns:h="http://java.sun.com/jsf/html"
	xmlns:f="http://java.sun.com/jsf/core"
	xmlns:s="http://jboss.com/products/seam/taglib"
	xmlns:rich="http://richfaces.org/rich"
	xmlns:a="http://richfaces.org/a4j">
	<body>
		<f:view>
			<ui:composition template="/layout/template.xhtml">
				<ui:define name="body">
					<h:form id="partyRelationshipForm">
						<rich:panel id="partyRelationshipPanel">
							<h:outputText escape="false"
								value="&lt;h1&gt;Add a relationship &lt;/h1&gt;"
								rendered="#{not partyRelationshipHome.managed}" />

							<h:outputText escape="false"
								value="&lt;h1&gt;Edit a relationship &lt;/h1&gt;"
								rendered="#{partyRelationshipHome.managed}" />

							<s:decorate id="fromDateDecoration" template="/layout/edit.xhtml">
								<ui:define name="label">From Date</ui:define>
								<rich:calendar id="fromDateCalendar"
									value="#{partyRelationship.from}" datePattern="MM/dd/yyyy" required="true" enableManualInput="true"/>

							</s:decorate>

							<s:decorate id="thruDateDecoration"
								template="/layout/edit.xhtml">
								<ui:define name="label">Thru Date</ui:define>
								<rich:calendar id="thruDateCalendar"
									value="#{partyRelationship.thru}" datePattern="MM/dd/yyyy" enableManualInput="true"/>
							</s:decorate>

							<s:decorate id="commentDecoration" template="/layout/edit.xhtml">
								<ui:define name="label">Comment</ui:define>
								<h:inputTextarea id="comment"
									value="#{partyRelationship.comment}" required="true" />
							</s:decorate>


							<s:decorate id="describedByDecoration"
								template="/layout/edit.xhtml">
								<ui:define name="label">Relationship Type</ui:define>
								<h:selectOneMenu id="describedBy"
									value="#{partyRelationship.describedBy}" required="true">
									<s:selectItems
										value="#{partyRelationshipTypeListForUserLogin.resultList}"
										var="relationshipType" label="#{relationshipType.description}"
										noSelectionLabel="Please select one." />
									<s:convertEntity />
									<a:support event="onchange" ajaxSingle="true"
										reRender="relationshipFromDecoration,relationshipToDecoration" />
								</h:selectOneMenu>
							</s:decorate>

							<s:decorate id="relationshipFromDecoration"
								template="/layout/edit.xhtml">

								<ui:define name="label">Relationship From (#{ partyRelationship.describedBy.fromRoleType.description})</ui:define>
								<h:selectOneMenu id="relationshipFrom"
									value="#{partyRelationship.fromParty}" required="true">
									<s:selectItems id="fromItems"
										value="#{findAllPartiesWithPartyRelationshipTypeFromRole.resultList}"
										var="curPartyRole"
										label="#{labelHelper.getPartyLabel(curPartyRole.roleFor)}"
										noSelectionLabel="Please select one." />
									<s:convertEntity />
								</h:selectOneMenu>
							</s:decorate>

							<s:decorate id="relationshipToDecoration"
								template="/layout/edit.xhtml">
								<ui:define name="label">Relationship To (#{ partyRelationship.describedBy.toRoleType.description})</ui:define>
								<h:selectOneMenu id="relationshipTo"
									value="#{partyRelationship.toParty}" required="true">
									<s:selectItems
										value="#{findAllPartiesWithPartyRelationshipTypeToRole.resultList}"
										var="curPartyRole"
										label="#{labelHelper.getPartyLabel(curPartyRole.roleFor)}"
										noSelectionLabel="Please select one." />
									<s:convertEntity />
								</h:selectOneMenu>
							</s:decorate>

							<s:decorate id="prioritizedByDecoration"
								template="/layout/edit.xhtml">
								<ui:define name="label">Priority</ui:define>
								<h:selectOneMenu id="prioritizedBy"
									value="#{partyRelationship.prioritizedBy}" required="true">
									<s:selectItems
										value="#{priorityTypeListForUserLogin.resultList}"
										var="priorityType" label="#{priorityType.description}"
										noSelectionLabel="Please select one." />
									<s:convertEntity />
								</h:selectOneMenu>
							</s:decorate>

							<s:decorate id="definedByDecoration"
								template="/layout/edit.xhtml">
								<ui:define name="label">Status</ui:define>
								<h:selectOneMenu id="definedBy"
									value="#{partyRelationship.definedBy}" required="true">
									<s:selectItems value="#{statusTypeListForUserLogin.resultList}"
										var="statusType" label="#{statusType.description}"
										noSelectionLabel="Please select one." />
									<s:convertEntity />
								</h:selectOneMenu>
							</s:decorate>

							<ui:include src="/party/communicationEvent/table.xhtml">
								<ui:param name="edit" value="true" />
								<ui:param name="communicationEventList"
									value="#{partyRelationship.contactedVia}" />
							</ui:include>
							<div style="clear: both" />
						</rich:panel>

						<ui:include src="/components/homeButtonsComponent.xhtml">
							<ui:param name="home" value="#{partyRelationshipController}"></ui:param>
						</ui:include>

					</h:form>
				</ui:define>
			</ui:composition>
		</f:view>
	</body>
</html>
