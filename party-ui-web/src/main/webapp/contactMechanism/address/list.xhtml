<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
	xmlns:ui="http://java.sun.com/jsf/facelets"
	xmlns:h="http://java.sun.com/jsf/html"
	xmlns:f="http://java.sun.com/jsf/core"
	xmlns:rich="http://richfaces.org/rich"
	xmlns:a="http://richfaces.org/a4j"
	xmlns:c="http://java.sun.com/jsp/jstl/core">
<body>
	<ui:component>

		<div class="actionButtons">
			<a:commandButton id="addAddressButton"
				action="#{partyFormController.addPostalAddress}" value="Add"
				rendered="#{edit}">
				
			</a:commandButton>

		</div>
		<rich:dataTable id="addressTable" title="Address List"
			value="#{partyFormController.party.residingAt}"
			var="curPostalAddress">

			<rich:column sortable="true" title="Comment">
				<f:facet name="header">Comment</f:facet>
				<h:outputText value="#{curPostalAddress.comment}" />
			</rich:column>

			<rich:column sortable="true" title="From">
				<f:facet name="header">From</f:facet>
				<h:outputText value="#{curPostalAddress.from}"
					rendered="#{not edit}">
					<f:convertDateTime pattern="MM/dd/yyyy" />
				</h:outputText>
			</rich:column>

			<rich:column sortable="true" title="Thru">
				<f:facet name="header">Thru</f:facet>
				<h:outputText value="#{curPostalAddress.thru}"
					rendered="#{not edit}">
					<f:convertDateTime pattern="MM/dd/yyyy" />
				</h:outputText>
			</rich:column>

			<rich:column sortable="true" title="Address">
				<f:facet name="header">Address</f:facet>
				<h:outputText value="#{curPostalAddress.locatedAt.address1}" />
				<h:outputText
					value="&lt;br /&gt;#{curPostalAddress.locatedAt.address2}"
					rendered="#{not empty curPostalAddress.locatedAt.address2}" />
			</rich:column>

			<rich:column sortable="true" title="City">
				<f:facet name="header">City</f:facet>
				<h:outputText value="#{curPostalAddress.locatedAt.city.name}" />
			</rich:column>

			<rich:column sortable="true" title="State">
				<f:facet name="header">State</f:facet>
				<h:outputText value="#{curPostalAddress.locatedAt.state.name}" />
			</rich:column>

			<rich:column sortable="true" title="Zip Code">
				<f:facet name="header">Zip Code</f:facet>
				<h:outputText value="#{curPostalAddress.locatedAt.zipCode.name}" />
				<h:outputText
					value="  + #{curPostalAddress.locatedAt.zipCode.plus4}"
					rendered="#{not empty curPostalAddress.locatedAt.zipCode.plus4}" />
			</rich:column>

		</rich:dataTable>
		<h:outputText rendered="#{empty party.residingAt}">There are no addresses.</h:outputText>
	</ui:component>
</body>
</html>